# End Report Graduation Internship ViriCiti

## Prelude

I did my internship during my final year at ViriCiti. ViriCiti provides a monitoring solution for electric buses all
around the world.

I wanted to do my internship at ViriCiti because of the worldwide scale on which ViriCiti operates. It is a great chance to do a project on this scale. The product makes me enthusiastic as well. Doing an internship which is related to the Internet of Things is an amazing chance to get.

I came across ViriCiti because I did my previous internship at Cohere, which, falls together with ViriCiti and Livetech under Transitions Now. I worked, while studying, for the past year and a half at ViriCiti. I really enjoy working here since the projects are perfect for Communication and Multimedia design students at the HvA.

During the internship I got to learn a completely new skill. I got the chance to learn native development, in the form of an Android and an iOS app, during the internship. This is a skill I have always wanted to learn. At ViriCiti I got the chance to learn this and create an incredible real-time monitoring app!

## The company

As I previously mentioned, ViriCiti provides a monitoring solution for electric buses all around the world. By giving insights about for range and
performance for instance, operators can act. This will reduce
range anxiety, the fear that the battery will run out before the
route ends, and therefore help companies drive electric. The
data comes in via the small computer inside the buses called
the ‘datahub’. ViriCiti develops these ‘datahubs’ in house.

ViriCiti promises a 10% higher uptime, a 25% increase in range
and a 100% transparency of your data. Therefore companies
around the world use this system.

### The office

ViriCiti has around 20 employees. All departments work in the
same space. This allows for an open office culture. There is a
direct line between customer calls to feedback for developers.
ViriCiti also provides space to learn. A few interns currently
work here as well as a few former interns.

### The products

ViriCiti's main product is the web application which let users view all of the live and historical data right in the browser. If an electric bus or truck can send out a paramater, a piece of data, ViriCiti will make sure you can view this live, perform analysis and generate reports on it.

ViriCiti also provides incident notifications through email and sms. A user can receive a notification when for instance a bus or truck has a low battery. This will help users keep track of their fleets.

ViriCiti has countless other, smaller, products to make sure this runs a smoothly as possible.

### My position within the company.

I am mainly the front-end developer at ViriCiti. I am in charge of realizing all the ideas for the front-end. I do have more than one role at ViriCiti because of it is smaller size. There is no visual or user experience design department. This is not a problem because I can take on these roles because of my studies. During this internship I will also be in charge of native development. This is a lot of responsibility that I am more than willing to take on.

## The internship supervisor

I had two people supervising my internship. Simon Rijk supervised my internship for the general part while Sakif Surur supervised me on day to day stuff.

### Simon Rijk

Simon Rijk, my internship supervisor, is an Aerospace engineer
and ICT specialist from the Technical University of Delft. He
is one of the founders of ViriCiti and has been working in this
field for several years. Because of his years of experience in
IoT and programming he is able to provide guidance in finding
the right solutions for complex problems in programming.

He makes sure that the quality of the products and solutions are of a great standard and will lead all major projects.

### Sakif Surur

Sakif Surur, developer at ViriCiti, is Web Developer from the
University of Amsterdam. He will help me with day-to-day
guidance. With his years of experience in web- and app development
he will be able to help me in the area of front-end
and app-development since the main assignment of the
internship is building a web and native app.

Sakif is involved in every project and will use his skills and knowledge to realize them and to optimize them.

## My job description

During the internship I took on four major roles. I had a lot of freedom and responsibility during this project. I worked very autonomous.

### Front-end/Native developer

I was in charge of building the actual app. For this I needed to use a popular Javascript front-end framework that is used to create native apps, React Native, to realize this. I was in charge of writing all the code to build the functionality and styles of the app.

### User Experience/Visual designer

I also was in charge of all the design work. I needed to sketch all the ideas to a low-fi prototype, design a hi-fi prototype and iterate over the user experience and visual design throughout the entire process of building the app.

### Back-end developer

I needed to build an server to hook my app up to and handle all the requests. To do this, I had to write an API to make requests to. This server would then make sure to get everything you requested. I also had to write some micro-services to provide functionality. More on this later.

### Project manager

I managed this project all on my own. It was my responsibility to make sure that the project was on track and everything was done in a structured and documented way. I also called a lot of meetings with other people if I felt that it was needed to discuss something.

## Internship activities

During my internship I did an immense amount of work within multiple roles. Below, I will describe all the activities from the initial meeting to the finished app and what roles I took on during the process.

### Initial meeting

During the initial meeting we discussed what the app should do in general. I got to find out what I needed to sketch and design. I had the meeting with Freek Dielissen, CEO, and Alexander Schabert, Head of Sales and Simon Rijk, CTO. During this meeting I found out that ViriCiti wanted an app that showed real time data, showed historical data and receives notifications if an incident triggers. In the core, this is what the app should be able to do.

Besides this, there was no initial sketch or design for the app. I was in charge of coming app with how this app should look and, more importantly, how the app should work. In order to do this as well as possible I started sketching to get all my first ideas out there. With these sketches I could validate my assumptions and iterate before creating the actual design and hi-fi prototype.

After I sketched the first few ideas I called another meeting with Freek Dielissen and Alexander Schabert. The liked the ideas I had but wanted to gear the app for the first version more towards to the dispatcher and less to the maintenance workers. I took their feedback and iterated over the sketches.

### Setting up project and Asana

I setup a brand new project and a new project on Asana, a Trello like to-do list app that ViriCiti uses. This gave me a global planning and let my internship supervisors keep track on the state of the project. I also used this as a sort of log on what I did for future reference.

### The design

#### First sketches

[IMAGE1][image2]

In image 1 and 2 you can see the results of the initial sketches. I sketched the rough ideas for the interface, what to display and how to navigate. I worked on these sketches to get a green light to turn these into actual visual designs. I got the green light and used these sketches to create the first hi-fi prototype.

#### First design

[IMAGE3][image4]

I used Adobe Experience Design to create all the designs and link them together to create a first hi-fi prototype. I went more in dept into all the elements in the user interface. In image 3 and 4 you can see the results of this work. With this hi-fi prototype I was able to get more feedback from Freek Dielissen, Alexander Schabert, Simon Rijk and Sakif Surur. I took all this feedback to iterate over the design

#### Iterating over design

[IMAGE5][image6]

In images 5 and 6 you can see the updated designs. I updated minor stuff and now had a good idea of how the app was going to look like and work. This was a prototype I could use to test with users.

#### User feedback/Interviews

I wanted to test the hi-fi prototype with the actual users. Because of this I setup a meeting with two customers of ViriCiti. The first customer was Qbuzz, the public transport company in Utrecht. The second one was Breytner, a transport company in Rotterdam. I started off with making a plan for these interviews. I wrote down what I wanted to get to know. This gave me a bit of guidance during the interviews.

The first interview with Qbuzz was very informative, but not for the prototype I made. I did not had the meeting with the actual dispatchers due to unavailability. I still managed to get information by steering the interview into a different direction. We discussed functionality for a different end user which we may want to focus on in the future. We discussed what we could provide for the bus drivers. I took note of all the ideas for future reference.

The second interview with Breytner was really useful. During the initial designs I inquired with Breytner about what they wanted to see in the app. With this information in mind I made the first few designs.

Breytner is a company with four electric transport trucks. They do not look as much on a daily basis to a lot of data or reports. Their main concern is that the trucks charge overnight. If a truck does not charge (correctly) overnight they have a serious problem.

We discussed what we could add in the app to provide them with the information they needed in the easiest way possible. At that moment, you could only see if a vehicle is charging. I assumed that that was enough. It turned out that that was not enough. They usually look up the graph of the battery charging. This way they can see if there is a sudden drop in charging rate. This sometimes happens due to faulty charging cables. When this happens and they do not notice it they can get into trouble. Their trucks need to be charged because of the small size of their fleet. Two not fully charged trucks can cause serious problems. Because of this I want to implement the graph in the app. At that moment the gauges with speed and state of charge were shown on the vehicle page. This does not make sense when the vehicle is charging. The speed will always be 0 and the state of charge will go up slowly. I took a look at showing the graph instead when the vehicle is charging. It was a small change, with a lot of impact.

This discussion led to the other part of the app. They can setup notifications if their trucks are not charging withing a range of time. They explained that the trucks get connected to the charger at around 8 p.m. and need to be charged the next morning. By creating a notification for this and receiving it on the native app we can help them prevent this issue. It would be very useful if they get a notification that charging is not going as it should. When they click on the notification they should immediately see how the truck has been charging.

#### Iterating over design

I took all the feedback and topics discussed during the interviews in to account while creating an iteration on the design for the app. The app will be more useful for the user with these modifications.

### Learning React Native

I then started to learn React Native. React Native is a framework that allows you to create a native app for Android and iOS with Javascript. This is a logical choice because ViriCiti works with Javascript and React for the web applications and so have I for the past year and a half.

Because of this, the learning curve was not very steep. React Native is basically React without a style sheet and HTML. I was pretty quick to pick React Native up. Within the week I made my first couple of screens to try stuff out.

#### Expo.io

I decided to use Expo.io as the development environment. Expo.io allowed me to create compile an iOS build on Linux which is normally not possible. Therefor, every developer at ViriCiti can easily help in the project if they need to. It also handles all the compiling for you. This can be a pain in the butt so using this relieves that.

Expo.io also sets you up with native functionalities that you will likely need. Push notifications is a good example of this. It is incredibly easy to set this up for Android and iOS.

### Building first screens

With Expo.io setup and a good hi-fi prototype I could finally get started with building the app. I decided to build two parts of the app before even beginning to think about getting data in there. These two parts were navigation and components.

#### Navigation

I decided to start with navigation. The app needs to be able to navigate to all the screens that it needs to. I decided on using an industry standard called React Navigation. React Navigation offers me with all the functionality I needed. I build four stacks, a collection of screens in an order, for the app. The first stack was the dashboard stack. This stack was for all the screens of the monitoring part. The second stack was the search stack. This stack was for searching and viewing fleets and vehicles. The third stack was the notification stack for viewing notifications. The final stack was the settings stack with all the user settings.

After setting this up I was ready to build the first few screens with the components it needed.

#### Components

[IMAGE7][image8][IMAGE9]

I decided to focus on the dashboard part of the app first. The dashboard screens consist of three major components. The three components, the map, the charts and the lists, in image 7, 8 and 9.

##### The map

The map component was fairly easy to build. I decided to use the most used and supported package React Native Maps by Airbnb. This package is by far the most documented, active and supported. It also provides all the functionality I needed it to. With this package I was able to create the map component very quickly.

##### The charts

For the historical data charts I decided to use Victory Charts. Like React Native Maps this package provided me with all the functionality I needed. It was incredibly easy to build the chart components with this.

For the live data charts I used a gauge package which I extended with some functionality to be the same as in my hi-fi prototype. This was a bit more work, but I managed to do it rather quickly.

##### The list

The final major component I build was the list component. I had to make this component myself. I made a component that will show the user different views while viewing fleets or vehicles. The list items all show real time data to the user. Building this component took some time, but was pretty easy to do.

### Building back-end for data

I now had all the components I needed ready. I just needed to hook real data up to the screens. To be able to do this my app had to connect to a server that would get me this data. So, I decided to write my own server that would do just that. Together with the help of Sakif Surur I build the first version of the server that would handle authentication, live data fetching and historical data fetching for the app.

### Hooking up app to back-end

I now had all the components and a server that would give me data. The final step was to hook the components up to actual data. I wrote a small API class in the native app to do just that. It made it easy for me to request live and historical data from any screen I wanted. After doing this we had a first working version of the dashboard stack in the app.

### Iterating over code

At this point, I wrote a lot of code. I wanted to let my code be reviewed by Sakif Surur to ensure that it was proper. With the a couple of small points of improvement by Sakif I had a good first part of the app.

### Learning React Redux

At this point of the project handling the state of the application became troublesome. I was writing to much of the same code in different places. I decided to look into React Redux. Redux is a framework that allows you to have a single global state to hook all of your screens up to.

I have always wanted to learn React Redux and this was the perfect use case for it. I managed to pick it up rather quickly with the help of a ViriCiti developer called Giuseppe Silleti. He explained some parts of Redux. After that I was able to use Redux throughout my app which made the app overall better.

### Bulding the notification screens

After all this work I could start with the final part of the app. This was the notification functionality. ViriCiti already had the system to detect incidents and to sent out an email or a sms. All I needed to do is build the functionality to also send push notifications. I first build all the screens an components I needed to have. I was able to use a lot of components I previously build.

### Building microservice

Once I had the screens and components I looked more into how to send the actual notification from a server to a specific user. I was able to use the functionality that Expo.io provided to do this. I used their SDK, software development kit, to do this.

I started with adding the functionality to ViriCiti's notification center project. It was as easy as saying to also sent out a notification if the user had logged into the app once. I then wrote a small micro-service, called Pusher, to send the actual notification through Expo.io to the devices. With the help of Sakif Surur this was pretty easy to do.

At this point I had build an app that does exactly what ViriCiti wanted. The app provides the user with real-time and historical data and sends out notifications when an incident triggers. I could start alpha testing this app.

### Designing icons and artwork

[IMAGE10][image11]

Before alpha testing I had to make an icon and some artwork for the Google Play store and the Apple store that you can see in image 10 and 11. I could not decide on which variant of the icon to chose from. One being designed with the flat design principles and one with a gradient to look more like how Apple designs their icons. I decided to do inquiries withing the office. I printed both icons out and let Transitions Now employees vote at the coffee corner as you can see in image 12.

[IMAGE12]

The two icons pretty much tied. It turned out that Android users liked the flat design icon more and iOS users the gradient. This was expected since this is what they are used to. I knew that either icon was fine, but maybe I could use the flat design for the Android app and the gradient for the iOS app.

### Setting up release pipelines

I could now start working on releasing an alpha version to ViriCiti employees before releasing a beta app to selected customers. To do this I had to find out how to release to both platforms and what is needed. I setup accounts for ViriCiti at both Apple and Google. It was easier for Google to setup an alpha release so I started with that. This also made more sense because most of the ViriCiti development team uses Android and these were the people I wanted to test the app with first.

After that I started the iOS alpha, called Testflight, to let the iOS users test the app. This went similar to the Android version.

### Testing with alpha group

During the testing with the alpha group I ran into a lot of small bugs. Things like responsiveness and weird crashes came up. I was able to get these bugs out pretty quickly which made the app way more robust. After thoroughly testing the app on both platforms I was confident enough to start a first beta release to selected customers.

### Testing with beta group

## The product

The product consists of two major parts. The first part is the real-time dashboard. The second part is the notification functionality.

### The real-time dashboard

The real-time dashboard consists of two screens re-used to show live data on company level, fleet level and vehicle level.

The first screen is the main dashboard used for getting detailed insights in the company, fleets and vehicles. The second screen is the real-time list used for navigating and getting quick insights in to fleets or vehicles.

#### The main dashboard

The main dashboard consists of four parts. The first part is the location and state of the vehicle. The second part is the live data blocks with the current value of the day. The third part is the live gauges on the vehicle level. The fourth part is the historical data in bar charts.

##### The map

The map shows the current position and state of the vehicles on company and fleet level. It shows the position and the current state in the form of a badge on the single vehicle level. You can use the map to see where the vehicles are driving and what their state is.

##### The live data blocks

In the live data blocks you can see the live values for the most important parameters. This gives you quick insight on each level.

##### The live data gauges

The live data gauges show you the most important information while the vehicle is driving. The vehicle level that shows this component. It shows you the current speed and state of charge of the vehicle.

##### The historical data bar charts

The historical data bar charts show the historical data for the most important parameters. You can see the data for the past hour, day, week and month. This is used to compare today's distance driven with yesterday's for instance.

#### The real-time list

The real-time list shows different components for fleets and vehicles. For fleets it shows just the live data values. For vehicles it shows the live data values and the sparkle charts.

##### Live data values

The live data values are simply shown as a number. The goal was to make the list for navigating way more informative as it would be normally. You can see the most important parameters, pieces of data, live for today. In the vehicle list you also see a badge with the current state of the vehicle like driving, idling or charging.

##### Sparkle charts

In the vehicle list you can see the sparkle charts based on the state of the vehicle. You see the sparkle chart when the vehicle is charging. You can see how full it is and how the chargin process is going. This is a feature that got added by interviewing Breytner in Rotterdam.

### The notifications

The notifications consist of two major parts. The list of received notifications and the detailed screen of a single notification.

#### The notification list

The notification list shows you all the received notifications and if you have read them. You can also see how many unread notifications you have in the badge in the tab navigator at the bottom.

#### The detailed notification screen

The detailed notification screen shows you all the information on the incident that triggered the notification. You can see where the incident occured, what values it triggered on and two call to actions. You can either open up your dialer from the app to call the person that needs to fix the problem. You can also view the vehicle it concerned to see what is going on.

## Learning goals

### Learning goal #1

#### As a front-end developer I want to learn how to build a performant native app using React Native so I can widen my skillset that I can offer to companies and users.

My first learning goal was to learn how to make a native app. I took a few steps to learn this. The three main parts of learning this was to learn React Native itself, learn what is possible with native development and how to release a native app to the Google Play store and the app store.

##### Learning React Native

I was pretty quick at getting to learn React Native itself. I have had a year and a half of experience in React with building web applications. I just had to figure out what was different in React Native

The main difference was styling and not having HTML. React Native uses CSS in a Javascript way. It uses the same logic, but the syntax is different. You are not able to write CSS in a regular way like you would for a web application. Instead, you write it in an object oriented way in Javascript. This was easy to pick up.

Not having HTML was more challenging. I could not make use of regular HTML but had to use native elements instead. This limited me in a way because I like to write semantically correct HTML. I had to figure out what elements to use and what you can or cannot do in native development. Along the way I found this out and I am now much more aware of this.

Releasing to the Google Play store and the App store was really challenging. ViriCiti and I did not have any knowledge on this. I had to figure out what accounts I needed and what I needed to do to get the app on both platforms. I researched a lot online to achieve this. I also asked Maarten Petit, a native developer at Cohere, to help me with the things I really could not find out. In the end I managed to get a good pipeline ready for releases and had the knowledge on how to do this for the future.

I have learned a lot about native development and all the aspects of it. With this knowledge and experience I am now confident enough to say that I can create native apps for companies. This felt like a great achievement because that is what I set out to do for this learning goal.

### Learning goal #2

#### As a front-end developer I want to sharpen my skills in the area of visual and user experience design so I can build better apps for companies and users.

Normally I leave the user experience and visual design part to other people in a project. Because of this I am not as T-shaped as I want to. Because of this I decided to take it head on during the internship. I first turned the ideas ViriCiti had into sketches to then validate those ideas. I then made a visual design for the app. With those visual designs I then created a hi-fi prototype to use for user testing at customers of ViriCiti I worked on this learning goal in every step of the project iteration after iteration.

I feel confident that my app is thoroughly tested and is based on information based on the end user. I have no problem defending the choices I made. A good example of this work is the information I got from my visit to Breytner. I found out what the user wanted to see and iterated over the design accordingly.

### Learning goal #3

#### As a front-end developer I want to write structured, commented, neat and DRY code so other developers can pick up projects I work on.

In order to achieve this learning goal I did a couple of things. Firstly, I made sure to build the entire app based on a configuration file. Each screen has a configuration which will render the components it needs to bases on that configuration. Because of this, nothing is hard coded which makes it easier to change things in the app without having to rewrite a lot of code.

Secondly, I made a lot of small components that build a bigger component. I did this to keep the code readable and reusable. This also provides a form of structure to the app instead of just writing huge chunks of code. This also made sure that the code was DRY, which stands for "Do not Repeat Yourself".

Thirdly, I commented my code very well. Each component starts with a comment explaining what component it is. I then put a comment before each method or function I wrote explaining what it does. Inside each method or function I also commented what pieces did.

Fourthly, I wrote a full README for the project explaining what the project does. I also showed a diagram of how all the services are tied together. This will help the next developer to get into this project.

Fifthly, I implemented React Redux which provides a global state in the app. This will make sure that I do not have the same pieces of state in different components. This will also make sure that the app is DRY.

Lastly, I made sure to write classes that will do things like make API calls or save something to local storage. This will make sure that I do not have this code multiple times throughout my code

## Observation assignments

### Observation assignment #1

#### How does ViriCiti ensures that everyone is up to date with the latest projects and techniques?

ViriCiti does four things to achieve this. Every morning the development team holds a stand up meeting. Day to day stuff gets told here and is discussed. For longer or bigger discussions ViriCiti holds a developer update each Monday afternoon. This is basically a very lengthy stand up where developers can go into more detail with each other. Once every few months ViriCiti holds a tech update. During this update developers get the chance to introduce the team to give a presentation to one another about new frameworks or techniques. Every month ViriCiti, Cohere and Livetech also hold a TN-update. During this update, all the companies under Transitions Now give updates on how things are going with the company. This is a great way to inform different departments on the matters of company growth, sales, marketing, development and more. This observation assignment helped me with asking for help or informing colleagues at the right moment. I was able to start discussions or ask for help when it was perfect to do so.

### Observation assignment #2

#### How does ViriCiti keep in contact with customers to get feedback on products?

To my surprise the development team does not have a lot of contact with the end users face to face. Studying Communication and Multimedia design at the HvA taught me to continuously validate ideas and products with the end user. At ViriCiti products are often build by demand of customers. The customer service and the sales department then brings this up during meetings. Developers will then make this and role out a beta to selected customers. This will then be the first real point of feedback on the product. During my internship I tried to set the example by involving end users in the end product throughout the project and to make iterations based on that feedback. This observation assignment helped me as well as ViriCiti. I could show ViriCiti the benefits of the user centric design approach.

### Observation assignment #3

#### How do project leaders at ViriCiti ensure that the project is going well and is on track?

ViriCiti project leaders keep track on progress during the daily stand up. This provides them with general knowledge on how the project is going. During this stand ups project leaders often call a meeting if it is needed. This will happen if a developer is stuck at a point in the project for example. During this private meetings they discuss on what steps to take to resolve any issues. Because of the open office culture they also drop by now and again to see what you are doing and if there are any issues. If you have issues and you are in need of help ViriCiti expects you to be pro-active about it and reach out to you project leader or schedule a meeting about the issue. This observation assignment helped me with getting the right informations and meetings when it was needed. I like the pro-active approach and decided to call a couple of meetings myself with developer during the internship. It validated that the way I like to work is also the way that companies work.

## Analysis performance reviews

### Mid project performance review

The mid project performance reviews went well. It validate my approach and gave me the confidence to keep up the good work I had done so far. There were not any negative points.

I got my first performance review from my internship supervisor Simon Rijk. In short, he was incredibly pleased with my performance so far. He was especially pleased about my ownership of the project, initiative and enthusiasm and the iterative design process. He reviewed my competences as following:

[IMAGE13]

I got my first performance review from my internship supervisor Simon Rijk. In short, he was incredibly pleased with my performance so far. He was especially pleased about my ownership of the project, initiative and enthusiasm and the iterative design process. He reviewed my competences as following:

[IMAGE14]

I review myself on my performance during the first part of the internship. My review was in line with the reviews by my internship supervisors. The only difference was the lower scores I gave myself in the competences. I reviewed my competences as following:

[IMAGE15]

### End project performance review

## Conclusions

So here we are. My internship is done. I am proud of the product I build. I was able to learn a complete new skill, native development, in a matter of a few months. This makes me a far better and useful front-end developer for companies. This was something I set out to do during this internship. I am also very pleased with the quality of the code I written and how I managed the project. I am confident that the product is of a high standard. The final thing I am very pleased with is the work I did on the user experience design and the visual design. I had an idea about the app, sketched it, designed it, build it and iterated over it. I was able to visit companies and get outside of the office to actually visit the users.

I am incredibly proud of the product I build. Creating a full app with real-time data, historical data, notifications and more is not an easy project to take on as a first native app. I still managed to do an incredible amount of work in just a couple of months. This app will also be a great part of what ViriCiti offers to their customers. A lot of user will use the app I build and that is what gives me satisfaction.

The internship validated the feeling I had that I am an industry ready developer who can realize ideas companies have in a solid product with the user in mind every step of the way. This is what I want to do as a developer, what companies want me to do and what a user needs somebody to do for them. My internship was a great success and I cannot wait to start my graduation project at ViriCiti for a completely new design problem!
